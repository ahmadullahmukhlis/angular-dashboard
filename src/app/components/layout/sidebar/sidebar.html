<!-- Sidebar Container -->
<div class="h-screen fixed left-0 top-0 z-50 flex">
  <!-- Main Sidebar -->
  <div
    class="h-full flex flex-col bg-white border-r border-gray-200 shadow-md transition-[width] duration-300 ease-in-out"
    [class.w-72]="!isCollapsed"
    [class.w-20]="isCollapsed"
  >

    <!-- Sidebar Header -->
    <div class="flex items-center justify-between h-20 px-6 border-b border-gray-200">

      <!-- Logo -->
      <div
        class="flex items-center space-x-3 overflow-hidden transition-all duration-300"
        [class.w-0]="isCollapsed"
        [class.opacity-0]="isCollapsed"
      >
        <div class="flex-shrink-0">
          <img
            src="assets/avatar.png"
            alt="User"
            class="w-10 h-10 rounded-full border-2 border-white shadow"
          />
        </div>

        <div class="flex-1 min-w-0">
          <h1 class="text-xl font-bold text-gray-800 truncate">Metric Dashboard</h1>
          <p class="text-xs text-gray-500 truncate">Analytics Platform</p>
        </div>
      </div>

      <!-- Collapsed Logo -->
       @if (isCollapsed) {
            <div class="flex items-center justify-center w-full" >
        <img
          src="assets/avatar.png"
          alt="User"
          class="w-10 h-10 rounded-full border-2 border-white shadow"
        />
      </div>
       }
  

      <!-- Toggle Button -->
      <button
        (click)="toggleSidebar()"
        class="absolute right-0 top-8 translate-x-1/2 w-8 h-8 bg-white border border-gray-300 rounded-full shadow flex items-center justify-center hover:bg-gray-50 z-10"
      >
        <i
          class="fas text-gray-600 transition-transform duration-300"
          [class.fa-chevron-left]="!isCollapsed"
          [class.fa-chevron-right]="isCollapsed"
        ></i>
      </button>
    </div>

    <!-- Sidebar Content -->
<div class="flex-1 overflow-y-auto py-6 px-4">
  <nav class="space-y-2">

    <!-- Parent Items -->
    @for (item of sidebarItems; track item.id) {
      <div class="mb-1">
        <a
          (click)="toggleItemExpansion(item.id)"
          [routerLink]="item.route"
          routerLinkActive="active-link"
          class="flex items-center px-4 py-3 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 group"
          [class.bg-primary-50]="item.isActive"
        >
          <i
            class="fas {{ item.icon }} text-lg transition-colors"
            [class.text-primary-600]="item.isActive"
            [class.text-gray-500]="!item.isActive"
            [class.group-hover:text-primary-600]="!item.isActive"
          ></i>

          @if (!isCollapsed) {
            <span
              class="ml-4 font-medium"
              [class.text-primary-600]="item.isActive"
              [class.text-gray-700]="!item.isActive"
            >
              {{ item.label }}
            </span>
          }
        
          @if (!isCollapsed && item.children) {
            <i
              class="fas fa-chevron-down ml-auto text-xs transition-transform duration-300 text-gray-400"
              [class.rotate-180]="item.isExpanded"
            ></i>
          }
        </a>

        <!-- Child Items -->
        <div
          class="ml-4 mt-1 space-y-1 border-l border-gray-200 pl-4"
          [hidden]="!item.children || !item.isExpanded || isCollapsed"
          @childAnimation
        >
          @for (child of item.children; track child.id) {
            <a
              (click)="setActiveItem(child.id)"
              [routerLink]="child.route"
              routerLinkActive="active-link"
              class="flex items-center px-4 py-2.5 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 group"
              [class.bg-primary-50]="child.isActive"
            >
              <i
                class="fas {{ child.icon }} text-sm transition-colors"
                [class.text-primary-600]="child.isActive"
                [class.text-gray-400]="!child.isActive"
                [class.group-hover:text-primary-600]="!child.isActive"
              ></i>

              <span
                class="ml-3 text-sm font-medium"
                [class.text-primary-600]="child.isActive"
                [class.text-gray-600]="!child.isActive"
              >
                {{ child.label }}
              </span>
            </a>
          }
        </div>
      </div>
    }

    <!-- Quick Actions -->
    @if (!isCollapsed) {
      <div class="pt-6">
        <div class="text-xs font-semibold text-gray-400 uppercase px-4 mb-2">
          Quick Actions
        </div>
      </div>
    }

    <div class="space-y-1">
      <a
        class="flex items-center px-4 py-3 rounded-lg cursor-pointer transition-colors hover:bg-gray-50"
        [class.justify-center]="isCollapsed"
      >
        <i class="fas fa-plus-circle text-lg text-gray-500"></i>
        @if (!isCollapsed) {
          <span class="ml-4 font-medium text-gray-700">
            Create New
          </span>
        }
      </a>

      <a
        class="flex items-center px-4 py-3 rounded-lg cursor-pointer transition-colors hover:bg-gray-50"
        [class.justify-center]="isCollapsed"
      >
        <i class="fas fa-download text-lg text-gray-500"></i>
        @if (!isCollapsed) {
          <span class="ml-4 font-medium text-gray-700">
            Export Data
          </span>
        }
      </a>
    </div>

  </nav>
</div>


    <!-- Footer -->
    <div class="border-t border-gray-200 p-4">
      <div class="flex items-center" [class.justify-center]="isCollapsed">

        <img
          src="assets/avatar.png"
          alt="User"
          class="w-10 h-10 rounded-full border-2 border-white shadow"
        />

        @if (!isCollapsed) {
             <div  class="ml-3 flex-1 min-w-0">
          <p class="text-sm font-semibold text-gray-800 truncate">John Doe</p>
          <p class="text-xs text-gray-500 truncate">Administrator</p>
        </div>
        }
     
        @if (!isCollapsed) {
              <button
         
          class="ml-2 p-1.5 text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100"
        >
          <i class="fas fa-cog"></i>
        </button>
        }
    

      </div>
    </div>
  </div>

  <!-- Mobile Overlay -->
   @if (!isCollapsed) {
  <div
    class="fixed inset-0 bg-black bg-opacity-40 z-40 md:hidden"
    (click)="toggleSidebar()"
  ></div>
   }

</div>
