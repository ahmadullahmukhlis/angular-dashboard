<div [class]="className">
  @for (field of fields; track field.name) {
    <div [class]="field.className">
      <label class="block mb-1 font-medium">{{ field.label }}</label>

      <!-- TEXT -->
      @if (field.type === 'text') {
        <input
          pInputText
          [formControlName]="field.name"
          [placeholder]="field.label"
          [disabled]="field.disabled"
          class="w-full"
          (blur)="form.get(field.name)?.markAsTouched()"
        />
      }

      <!-- NUMBER -->
      @if (field.type === 'number') {
        <p-inputNumber
          [formControlName]="field.name"
          [disabled]="field.disabled"
          class="w-full"
          (onBlur)="form.get(field.name)?.markAsTouched()"
        ></p-inputNumber>
      }

      <!-- PASSWORD -->
      @if (field.type === 'password') {
        <p-password
          toggleMask
          [formControlName]="field.name"
          [disabled]="field.disabled"
          (onBlur)="form.get(field.name)?.markAsTouched()"
        ></p-password>
      }

      <!-- DATE -->
      @if (field.type === 'date') {
        <p-datePicker
          [formControlName]="field.name"
          [disabled]="field.disabled"
          (onBlur)="form.get(field.name)?.markAsTouched()"
        ></p-datePicker>
      }

      <!-- TEXTAREA -->
      @if (field.type === 'textarea') {
        <textarea
          pTextarea
          rows="4"
          [formControlName]="field.name"
          [disabled]="field.disabled"
          class="w-full"
          (blur)="form.get(field.name)?.markAsTouched()"
        ></textarea>
      }

      <!-- CHECKBOX -->
      @if (field.type === 'checkbox') {
        <p-checkbox
          binary="true"
          [formControlName]="field.name"
          [disabled]="field.disabled"
        ></p-checkbox>
      }

      <!-- SWITCH -->
      @if (field.type === 'switch') {
        <p-toggleSwitch [formControlName]="field.name" [disabled]="field.disabled"></p-toggleSwitch>
      }

      <!-- SELECT -->
      @if (field.type === 'select') {
        <p-select
          [options]="field.options"
          [formControlName]="field.name"
          [disabled]="field.disabled"
          [optionLabel]="field.optionLabel ?? 'id'"
          class="w-full"
          appendTo="body"
          (onBlur)="form.get(field.name)?.markAsTouched()"
        ></p-select>
      }

      <!-- SERVER SELECT -->
      @if (field.type === 'server-select') {
        <app-single-select
          [url]="field.url"
          [disabled]="field.disabled"
          [optionLabel]="field.optionLabel ?? 'id'"
          [optionValue]="field.optionValue ?? 'name'"
          (valueChange)="handleSelectChange(field, $event)"
        ></app-single-select>
      }

      <!-- MULTI SELECT (if you need it) -->
      @if (field.type === 'multi-select') {
        <app-multi-selected
          [url]="field.url ?? ''"
          [disabled]="field.disabled"
          [optionLabel]="field.optionLabel ?? 'id'"
          (valueChange)="handleSelectChange(field, $event)"
        ></app-multi-selected>
      }
    </div>
  }

  <!-- APPLY BUTTON -->
  <div class="mt-4">
    <button pButton type="button" label="Apply Filter" (click)="applyFilter()"></button>
  </div>
</div>
